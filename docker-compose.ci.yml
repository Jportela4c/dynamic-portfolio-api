# CI-specific overrides for Newman tests
# Usage: docker compose -f docker-compose.yml -f docker-compose.ci.yml up

services:
  flyway-test-data:
    image: mcr.microsoft.com/mssql-tools@sha256:62556500522072535cb3df2bb5965333dded9be47000473e9e0f84118e248642
    platform: linux/amd64
    restart: "no"
    command: >
      bash -c "/opt/mssql-tools/bin/sqlcmd -S sqlserver -U sa -P 'YourStrong@Passw0rd' -C -i /scripts/setup-test-data.sql"
    depends_on:
      flyway:
        condition: service_completed_successfully
    volumes:
      - ./postman/scripts:/scripts
