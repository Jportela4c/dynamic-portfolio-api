{
  "info": {
    "_postman_id": "dynamic-portfolio-api-v1",
    "name": "Dynamic Portfolio API",
    "description": "Investment simulation system for Brazilian financial products. Tests all endpoints from the challenge specification.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "01 - Authentication",
      "item": [
        {
          "name": "Get OAuth2 Token - Client Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has access_token\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('access_token');",
                  "    pm.expect(json.access_token).to.be.a('string');",
                  "    pm.expect(json.access_token.length).to.be.greaterThan(20);",
                  "});",
                  "",
                  "pm.test(\"Response has token_type Bearer\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('token_type');",
                  "    pm.expect(json.token_type).to.equal('Bearer');",
                  "});",
                  "",
                  "// Save token for subsequent requests",
                  "if (pm.response.code === 200) {",
                  "    const json = pm.response.json();",
                  "    pm.environment.set('jwtToken', json.access_token);",
                  "    console.log('OAuth2 access token saved to environment');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "basic",
              "basic": [
                {
                  "key": "username",
                  "value": "portfolio-api-client",
                  "type": "string"
                },
                {
                  "key": "password",
                  "value": "api-secret",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "client_credentials",
                  "type": "text"
                },
                {
                  "key": "scope",
                  "value": "read write",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/oauth2/token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "oauth2",
                "token"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Access Protected Endpoint - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.expect(pm.response.code).to.equal(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 123,\n  \"tipo\": \"CDB\",\n  \"valor\": 10000,\n  \"prazo\": 12\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "02 - Investment Simulation",
      "item": [
        {
          "name": "Simulate CDB Investment - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response matches SPEC schema exactly\", () => {",
                  "    const json = pm.response.json();",
                  "    ",
                  "    // Per SPEC: POST /simular-investimento response",
                  "    pm.expect(json).to.have.property('produtoValidado');",
                  "    pm.expect(json).to.have.property('resultadoSimulacao');",
                  "    pm.expect(json).to.have.property('dataSimulacao');",
                  "    ",
                  "    // produtoValidado fields",
                  "    const produto = json.produtoValidado;",
                  "    pm.expect(produto).to.have.property('id');",
                  "    pm.expect(produto).to.have.property('nome');",
                  "    pm.expect(produto).to.have.property('tipo');",
                  "    pm.expect(produto).to.have.property('rentabilidade');",
                  "    pm.expect(produto).to.have.property('risco');",
                  "    pm.expect(produto.tipo).to.equal('CDB');",
                  "    ",
                  "    // resultadoSimulacao fields per SPEC",
                  "    const resultado = json.resultadoSimulacao;",
                  "    pm.expect(resultado).to.have.property('valorFinal');",
                  "    pm.expect(resultado).to.have.property('rentabilidadeEfetiva');",
                  "    pm.expect(resultado).to.have.property('prazoMeses');",
                  "});",
                  "",
                  "pm.test(\"Calculation values are valid\", () => {",
                  "    const resultado = pm.response.json().resultadoSimulacao;",
                  "    const valorFinal = parseFloat(resultado.valorFinal);",
                  "    ",
                  "    pm.expect(valorFinal).to.be.greaterThan(0);",
                  "    pm.expect(resultado.rentabilidadeEfetiva).to.be.a('number');",
                  "    pm.expect(resultado.rentabilidadeEfetiva).to.be.at.least(0);",
                  "    pm.expect(resultado.rentabilidadeEfetiva).to.be.at.most(1);",
                  "    pm.expect(resultado.prazoMeses).to.equal(12);",
                  "});",
                  "",
                  "pm.test(\"Product validated has complete fields\", () => {",
                  "    const produto = pm.response.json().produtoValidado;",
                  "    // Validate data types per SPEC",
                  "    pm.expect(produto.id).to.be.a('number');",
                  "    pm.expect(produto.nome).to.be.a('string');",
                  "    pm.expect(produto.tipo).to.be.a('string');",
                  "    pm.expect(produto.rentabilidade).to.be.a('number');",
                  "    pm.expect(produto.rentabilidade).to.be.at.least(0);",
                  "    pm.expect(produto.rentabilidade).to.be.at.most(1);",
                  "    pm.expect(produto.risco).to.be.a('string');",
                  "});",
                  "",
                  "pm.test(\"dataSimulacao is valid ISO datetime\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.dataSimulacao).to.be.a('string');",
                  "    // Validate ISO 8601 format",
                  "    const isoDateRegex = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/;",
                  "    pm.expect(json.dataSimulacao).to.match(isoDateRegex);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate LCI Investment - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Product type is LCI\", () => {",
                  "    const produto = pm.response.json().produtoValidado;",
                  "    pm.expect(produto.tipo).to.equal('LCI');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 15000,\n  \"prazoMeses\": 18,\n  \"tipoProduto\": \"LCI\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Value (Negative)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error information\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('status');",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json.status).to.equal(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": -1000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Term (Zero)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error information\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('status');",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json.status).to.equal(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 0,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Product Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"INVALID_TYPE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Simulations",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Simulation objects match SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        // Per SPEC: GET /simulacoes response",
                  "        pm.expect(firstItem).to.have.property('id');",
                  "        pm.expect(firstItem).to.have.property('clienteId');",
                  "        pm.expect(firstItem).to.have.property('produto');",
                  "        pm.expect(firstItem).to.have.property('valorInvestido'); // SPEC field name",
                  "        pm.expect(firstItem).to.have.property('valorFinal');",
                  "        pm.expect(firstItem).to.have.property('prazoMeses');",
                  "        pm.expect(firstItem).to.have.property('dataSimulacao');",
                  "        ",
                  "        // Validate data types",
                  "        pm.expect(firstItem.id).to.be.a('number');",
                  "        pm.expect(firstItem.clienteId).to.be.a('number');",
                  "        pm.expect(firstItem.produto).to.be.a('string');",
                  "        pm.expect(firstItem.valorInvestido).to.be.a('number');",
                  "        pm.expect(firstItem.valorInvestido).to.be.greaterThan(0);",
                  "        pm.expect(firstItem.valorFinal).to.be.a('number');",
                  "        pm.expect(firstItem.valorFinal).to.be.greaterThan(0);",
                  "        pm.expect(firstItem.prazoMeses).to.be.a('number');",
                  "        pm.expect(firstItem.prazoMeses).to.be.at.least(1);",
                  "        pm.expect(firstItem.dataSimulacao).to.be.a('string');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/simulacoes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simulacoes"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Daily Aggregations",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Aggregation objects match SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        // Per SPEC: GET /simulacoes/por-produto-dia response",
                  "        pm.expect(firstItem).to.have.property('produto');",
                  "        pm.expect(firstItem).to.have.property('data');",
                  "        pm.expect(firstItem).to.have.property('quantidadeSimulacoes');",
                  "        pm.expect(firstItem).to.have.property('mediaValorFinal'); // SPEC field name",
                  "        ",
                  "        // Validate data types",
                  "        pm.expect(firstItem.produto).to.be.a('string');",
                  "        pm.expect(firstItem.data).to.be.a('string');",
                  "        pm.expect(firstItem.quantidadeSimulacoes).to.be.a('number');",
                  "        pm.expect(firstItem.quantidadeSimulacoes).to.be.at.least(1);",
                  "        pm.expect(firstItem.mediaValorFinal).to.be.a('number');",
                  "        pm.expect(firstItem.mediaValorFinal).to.be.greaterThan(0);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/simulacoes/por-produto-dia",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simulacoes",
                "por-produto-dia"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "03 - Risk Profile",
      "item": [
        {
          "name": "Get Risk Profile - Conservative Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response matches SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    // Per SPEC: GET /perfil-risco/{clienteId} response",
                  "    pm.expect(json).to.have.property('clienteId');",
                  "    pm.expect(json).to.have.property('perfil');",
                  "    pm.expect(json).to.have.property('pontuacao');",
                  "    pm.expect(json).to.have.property('descricao');",
                  "    ",
                  "    // Validate data types",
                  "    pm.expect(json.clienteId).to.be.a('number');",
                  "    pm.expect(json.perfil).to.be.a('string');",
                  "    pm.expect(json.pontuacao).to.be.a('number');",
                  "    pm.expect(json.descricao).to.be.a('string');",
                  "});",
                  "",
                  "pm.test(\"Profile is valid\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.perfil).to.be.oneOf(['Conservador', 'Moderado', 'Agressivo']);",
                  "});",
                  "",
                  "pm.test(\"Score is within valid range\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.pontuacao).to.be.a('number');",
                  "    pm.expect(json.pontuacao).to.be.at.least(0);",
                  "    pm.expect(json.pontuacao).to.be.at.most(100);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/{{clienteIdConservative}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "{{clienteIdConservative}}"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Risk Profile - Aggressive Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Profile classification exists\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('perfil');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/{{clienteIdAggressive}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "{{clienteIdAggressive}}"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Risk Profile - Non-existent Customer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 or 200 with default profile\", () => {",
                  "    const code = pm.response.code;",
                  "    pm.expect(code).to.be.oneOf([200, 404]);",
                  "    ",
                  "    if (code === 200) {",
                  "        const json = pm.response.json();",
                  "        pm.expect(json).to.have.property('perfil');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "999999"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recommended Products - Conservative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Products match SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        json.forEach(produto => {",
                  "            // Per SPEC: GET /produtos-recomendados/{perfil} response",
                  "            pm.expect(produto).to.have.property('id');",
                  "            pm.expect(produto).to.have.property('nome');",
                  "            pm.expect(produto).to.have.property('tipo');",
                  "            pm.expect(produto).to.have.property('rentabilidade');",
                  "            pm.expect(produto).to.have.property('risco');",
                  "            ",
                  "            // Validate data types",
                  "            pm.expect(produto.id).to.be.a('number');",
                  "            pm.expect(produto.nome).to.be.a('string');",
                  "            pm.expect(produto.tipo).to.be.a('string');",
                  "            pm.expect(produto.rentabilidade).to.be.a('number');",
                  "            pm.expect(produto.rentabilidade).to.be.at.least(0);",
                  "            pm.expect(produto.rentabilidade).to.be.at.most(1);",
                  "            pm.expect(produto.risco).to.be.a('string');",
                  "        });",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"Products match conservative profile\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        json.forEach(produto => {",
                  "            pm.expect(produto.risco).to.be.oneOf(['Baixo', 'M\u00e9dio']);",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/Conservador",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "Conservador"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recommended Products - Aggressive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/Agressivo",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "Agressivo"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Investment History",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Investment history matches SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        // Per SPEC: GET /investimentos/{clienteId} response",
                  "        pm.expect(firstItem).to.have.property('id');",
                  "        pm.expect(firstItem).to.have.property('tipo');",
                  "        pm.expect(firstItem).to.have.property('valor');",
                  "        pm.expect(firstItem).to.have.property('rentabilidade');",
                  "        pm.expect(firstItem).to.have.property('data');",
                  "        ",
                  "        // Validate data types",
                  "        pm.expect(firstItem.id).to.be.a('number');",
                  "        pm.expect(firstItem.tipo).to.be.a('string');",
                  "        pm.expect(firstItem.valor).to.be.a('number');",
                  "        pm.expect(firstItem.rentabilidade).to.be.a('number');",
                  "        pm.expect(firstItem.rentabilidade).to.be.at.least(0);",
                  "        pm.expect(firstItem.rentabilidade).to.be.at.most(1);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/investimentos/{{clienteIdConservative}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "{{clienteIdConservative}}"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "04 - Telemetry",
      "item": [
        {
          "name": "Get Telemetry Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response matches SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    // Per SPEC: GET /telemetria returns wrapper object",
                  "    pm.expect(json).to.have.property('servicos');",
                  "    pm.expect(json.servicos).to.be.an('array');",
                  "    pm.expect(json).to.have.property('periodo');",
                  "    pm.expect(json.periodo).to.have.property('inicio');",
                  "    pm.expect(json.periodo).to.have.property('fim');",
                  "",
                  "    // Data type validation for periodo",
                  "    pm.expect(json.periodo.inicio).to.be.a('string');",
                  "    pm.expect(json.periodo.fim).to.be.a('string');",
                  "",
                  "    // Date format validation (YYYY-MM-DD)",
                  "    const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;",
                  "    pm.expect(json.periodo.inicio).to.match(dateRegex);",
                  "    pm.expect(json.periodo.fim).to.match(dateRegex);",
                  "});",
                  "",
                  "pm.test(\"Service objects have complete SPEC fields with correct types\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.servicos && json.servicos.length > 0) {",
                  "        const firstService = json.servicos[0];",
                  "",
                  "        // Field presence per SPEC",
                  "        pm.expect(firstService).to.have.property('nome');",
                  "        pm.expect(firstService).to.have.property('quantidadeChamadas');",
                  "        pm.expect(firstService).to.have.property('mediaTempoRespostaMs');",
                  "",
                  "        // Data type validation",
                  "        pm.expect(firstService.nome).to.be.a('string');",
                  "        pm.expect(firstService.quantidadeChamadas).to.be.a('number');",
                  "        pm.expect(firstService.mediaTempoRespostaMs).to.be.a('number');",
                  "",
                  "        // Value validation",
                  "        pm.expect(firstService.quantidadeChamadas).to.be.at.least(0);",
                  "        pm.expect(firstService.mediaTempoRespostaMs).to.be.at.least(0);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"All service names are valid\", () => {",
                  "    const json = pm.response.json();",
                  "    const validNames = [",
                  "        'simular-investimento',",
                  "        'perfil-risco',",
                  "        'produtos-recomendados',",
                  "        'investimentos',",
                  "        'simulacoes',",
                  "        'simulacoes-agregadas',",
                  "        'telemetria'",
                  "    ];",
                  "",
                  "    json.servicos.forEach(service => {",
                  "        pm.expect(validNames).to.include(service.nome);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/telemetria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "telemetria"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Telemetry - Verify Metrics Collection",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Call multiple endpoints to generate telemetry data",
                  "const baseUrl = pm.environment.get('baseUrl');",
                  "const token = pm.environment.get('jwtToken');",
                  "",
                  "// Simulation request payload",
                  "const simulationPayload = {",
                  "    clienteId: 123,",
                  "    valor: 10000.00,",
                  "    prazoMeses: 12,",
                  "    tipoProduto: 'CDB'",
                  "};",
                  "",
                  "// Call simular-investimento 3 times",
                  "for (let i = 0; i < 3; i++) {",
                  "    pm.sendRequest({",
                  "        url: baseUrl + '/simular-investimento',",
                  "        method: 'POST',",
                  "        header: {",
                  "            'Content-Type': 'application/json',",
                  "            'Authorization': 'Bearer ' + token",
                  "        },",
                  "        body: {",
                  "            mode: 'raw',",
                  "            raw: JSON.stringify(simulationPayload)",
                  "        }",
                  "    }, (err, res) => {",
                  "        if (err) console.log('Simulation request error:', err);",
                  "    });",
                  "}",
                  "",
                  "// Call perfil-risco 2 times",
                  "for (let i = 0; i < 2; i++) {",
                  "    pm.sendRequest({",
                  "        url: baseUrl + '/perfil-risco/1',",
                  "        method: 'GET',",
                  "        header: {",
                  "            'Authorization': 'Bearer ' + token",
                  "        }",
                  "    }, (err, res) => {",
                  "        if (err) console.log('Risk profile request error:', err);",
                  "    });",
                  "}",
                  "",
                  "// Call simulacoes",
                  "pm.sendRequest({",
                  "    url: baseUrl + '/simulacoes',",
                  "    method: 'GET',",
                  "    header: {",
                  "        'Authorization': 'Bearer ' + token",
                  "    }",
                  "}, (err, res) => {",
                  "    if (err) console.log('Simulacoes request error:', err);",
                  "});",
                  "",
                  "// Wait 500ms for metrics to be recorded",
                  "setTimeout(() => {}, 500);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Telemetry recorded simulation calls\", () => {",
                  "    const json = pm.response.json();",
                  "    const simulationMetrics = json.servicos.find(s => s.nome === 'simular-investimento');",
                  "    ",
                  "    pm.expect(simulationMetrics, 'simular-investimento metrics should exist').to.exist;",
                  "    pm.expect(simulationMetrics.quantidadeChamadas, 'Should have recorded at least 3 simulation calls').to.be.at.least(3);",
                  "    pm.expect(simulationMetrics.mediaTempoRespostaMs, 'Response time should be positive').to.be.greaterThan(0);",
                  "});",
                  "",
                  "pm.test(\"Telemetry recorded risk profile calls\", () => {",
                  "    const json = pm.response.json();",
                  "    const riskMetrics = json.servicos.find(s => s.nome === 'perfil-risco');",
                  "    ",
                  "    pm.expect(riskMetrics, 'perfil-risco metrics should exist').to.exist;",
                  "    pm.expect(riskMetrics.quantidadeChamadas, 'Should have recorded at least 2 risk profile calls').to.be.at.least(2);",
                  "});",
                  "",
                  "pm.test(\"Telemetry recorded simulacoes calls\", () => {",
                  "    const json = pm.response.json();",
                  "    const simulacoesMetrics = json.servicos.find(s => s.nome === 'simulacoes');",
                  "    ",
                  "    pm.expect(simulacoesMetrics, 'simulacoes metrics should exist').to.exist;",
                  "    pm.expect(simulacoesMetrics.quantidadeChamadas, 'Should have recorded at least 1 simulacoes call').to.be.at.least(1);",
                  "});",
                  "",
                  "pm.test(\"All metrics have valid response times\", () => {",
                  "    const json = pm.response.json();",
                  "    json.servicos.forEach(service => {",
                  "        pm.expect(service.mediaTempoRespostaMs, `${service.nome} response time should be non-negative`).to.be.at.least(0);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/telemetria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "telemetria"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "05 - Edge Cases & Performance",
      "item": [
        {
          "name": "Simulate - Boundary Value (Minimum)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Product not found with minimum value of R$1000",
                  "pm.test(\"Status code is 404 (no product matches)\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 1000,\n  \"prazoMeses\": 1,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Large Value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Calculation handles large values correctly\", () => {",
                  "    const resultado = pm.response.json().resultadoSimulacao;",
                  "    const valorFinal = parseFloat(resultado.valorFinal);",
                  "    ",
                  "    // Input was R$ 1,000,000 - verify calculation succeeded",
                  "    pm.expect(valorFinal).to.be.greaterThan(1000000);",
                  "    pm.expect(valorFinal).to.be.a('number');",
                  "    pm.expect(isNaN(valorFinal)).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 1000000,\n  \"prazoMeses\": 24,\n  \"tipoProduto\": \"FundoAcoes\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Response Time Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is acceptable (< 1000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});",
                  "",
                  "pm.test(\"Response time is good (< 500ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(500);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            },
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwtToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Validation Tests (Entity Existence)",
      "item": [
        {
          "name": "Risk Profile - Non-existent Customer (Should 404)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/99999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "99999"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test(\"Response has correct content type\", () => {",
                  "    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
                  "});",
                  "",
                  "pm.test(\"Status code is 404 for non-existent customer\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property(\"message\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Investment History - Non-existent Customer (Should 404)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/investimentos/99999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "99999"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test(\"Response has correct content type\", () => {",
                  "    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
                  "});",
                  "",
                  "pm.test(\"Status code is 404 for non-existent customer\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property(\"message\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Product Recommendations - Invalid Profile (Should 400)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/INVALID_PROFILE",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "INVALID_PROFILE"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for invalid profile\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json).to.have.property('status', 400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Non-existent Customer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 99999,\n  \"valor\": 10000.0,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test(\"Response has correct content type\", () => {",
                  "    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
                  "});",
                  "",
                  "pm.test(\"Status code is 200 (simulation allowed for any customer ID)\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has simulation result\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property(\"resultadoSimulacao\");",
                  "    pm.expect(json.resultadoSimulacao).to.have.property(\"valorFinal\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Negative & Edge Case Tests",
      "item": [
        {
          "name": "Simulation - Zero Value",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 0,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for zero value\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Negative Value",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": -1000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for negative value\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Zero Prazo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 0,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for zero prazo\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Negative Prazo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": -12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for negative prazo\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Missing Cliente ID",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for missing clienteId\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Missing Tipo Produto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for missing tipoProduto\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Empty JSON Body",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for empty body\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Malformed JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"clienteId\": 1, \"valor\":"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for malformed JSON\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Negative ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/-1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "-1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404 for negative ID\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Zero ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "0"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 for zero ID\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Investment History - Negative ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/investimentos/-1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "-1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404 for negative ID\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for missing token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Risk Profile - Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer INVALID_TOKEN_12345"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for invalid token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Simulation - Expired Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTYwMDAwMDAwMCwiZXhwIjoxNjAwMDg2NDAwfQ.invalid"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for expired token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "auth": {
            "type": "noauth"
          }
        },
        {
          "name": "Products - Empty Profile String",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/ ",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                " "
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Products - Case Sensitivity Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/conservador",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "conservador"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Should accept lowercase or return 400",
                  "pm.test(\"Response is valid (200 or 400)\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Invalid Tipo Produto (Invalid Enum)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test(\"Response has correct content type\", () => {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "",
                  "pm.test(\"Status code is 400 for invalid enum\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Error message mentions invalid value\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.message).to.include('Valor inv\u00e1lido');",
                  "    pm.expect(json.message).to.include('tipoProduto');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 123,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"INVALID_TYPE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulation - Lowercase Tipo Produto",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for lowercase enum\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Error message mentions invalid value\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.message).to.include('Valor inv\u00e1lido');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 123,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"cdb\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Risk Profile - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/123",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "123"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Products - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/Moderado",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "Moderado"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Investment History - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/investimentos/123",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "123"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulations List - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/simulacoes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simulacoes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Telemetry - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", () => {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/telemetria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "telemetria"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script - runs before each request",
          "console.log('Running request: ' + pm.info.requestName);",
          "console.log('Environment: ' + pm.environment.name);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script - runs after each request",
          "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "pm.test(\"Response has correct content type\", () => {",
          "    if (pm.response.code !== 401 && pm.response.code !== 403) {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    }",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "clienteIdConservative",
      "value": "1",
      "type": "default"
    },
    {
      "key": "clienteIdModerate",
      "value": "2",
      "type": "default"
    },
    {
      "key": "clienteIdAggressive",
      "value": "3",
      "type": "default"
    }
  ]
}