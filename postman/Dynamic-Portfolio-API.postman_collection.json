{
  "info": {
    "_postman_id": "dynamic-portfolio-api-v1",
    "name": "Dynamic Portfolio API",
    "description": "Investment simulation system for Brazilian financial products. Tests all endpoints from the challenge specification.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwtToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "01 - Authentication",
      "item": [
        {
          "name": "Login - Valid Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has JWT token\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('token');",
                  "    pm.expect(json.token).to.be.a('string');",
                  "    pm.expect(json.token.length).to.be.greaterThan(20);",
                  "});",
                  "",
                  "pm.test(\"Response has token type\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('type');",
                  "});",
                  "",
                  "// Save token for subsequent requests",
                  "if (pm.response.code === 200) {",
                  "    const json = pm.response.json();",
                  "    pm.environment.set('jwtToken', json.token);",
                  "    console.log('JWT token saved to environment');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{username}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login - Invalid Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// KNOWN ISSUE: API currently returns 200 for any username",
                  "// SPEC requires 401 for invalid credentials",
                  "// This is documented in postman/KNOWN_ISSUES.md",
                  "pm.test(\"Status code is 200 or 401\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 401]);",
                  "});",
                  "",
                  "if (pm.response.code === 401) {",
                  "    pm.test(\"Response has error message\", () => {",
                  "        const json = pm.response.json();",
                  "        pm.expect(json).to.have.property('message');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"wronguser\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Access Protected Endpoint - Without Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "02 - Investment Simulation",
      "item": [
        {
          "name": "Simulate CDB Investment - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response matches SPEC schema exactly\", () => {",
                  "    const json = pm.response.json();",
                  "    ",
                  "    // Per SPEC: POST /simular-investimento response",
                  "    pm.expect(json).to.have.property('produtoValidado');",
                  "    pm.expect(json).to.have.property('resultadoSimulacao');",
                  "    pm.expect(json).to.have.property('dataSimulacao');",
                  "    ",
                  "    // produtoValidado fields",
                  "    const produto = json.produtoValidado;",
                  "    pm.expect(produto).to.have.property('id');",
                  "    pm.expect(produto).to.have.property('nome');",
                  "    pm.expect(produto).to.have.property('tipo');",
                  "    pm.expect(produto).to.have.property('rentabilidade');",
                  "    pm.expect(produto).to.have.property('risco');",
                  "    pm.expect(produto.tipo).to.equal('CDB');",
                  "    ",
                  "    // resultadoSimulacao fields per SPEC",
                  "    const resultado = json.resultadoSimulacao;",
                  "    pm.expect(resultado).to.have.property('valorFinal');",
                  "    pm.expect(resultado).to.have.property('rentabilidadeEfetiva');",
                  "    pm.expect(resultado).to.have.property('prazoMeses');",
                  "});",
                  "",
                  "pm.test(\"Calculation values are valid\", () => {",
                  "    const resultado = pm.response.json().resultadoSimulacao;",
                  "    const valorFinal = parseFloat(resultado.valorFinal);",
                  "    ",
                  "    pm.expect(valorFinal).to.be.greaterThan(0);",
                  "    pm.expect(resultado.rentabilidadeEfetiva).to.be.a('number');",
                  "    pm.expect(resultado.prazoMeses).to.equal(12);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate LCI Investment - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Product type is LCI\", () => {",
                  "    const produto = pm.response.json().produtoValidado;",
                  "    pm.expect(produto.tipo).to.equal('LCI');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 15000,\n  \"prazoMeses\": 18,\n  \"tipoProduto\": \"LCI\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Value (Negative)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error information\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('status');",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json.status).to.equal(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": -1000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Term (Zero)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error information\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('status');",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json.status).to.equal(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 0,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Invalid Product Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"INVALID_TYPE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Simulations",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Simulation objects match SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        // Per SPEC: GET /simulacoes response",
                  "        pm.expect(firstItem).to.have.property('id');",
                  "        pm.expect(firstItem).to.have.property('clienteId');",
                  "        pm.expect(firstItem).to.have.property('produto');",
                  "        pm.expect(firstItem).to.have.property('valorInvestido'); // SPEC field name",
                  "        pm.expect(firstItem).to.have.property('valorFinal');",
                  "        pm.expect(firstItem).to.have.property('prazoMeses');",
                  "        pm.expect(firstItem).to.have.property('dataSimulacao');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/simulacoes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simulacoes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Daily Aggregations",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Aggregation objects match SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        // Per SPEC: GET /simulacoes/por-produto-dia response",
                  "        pm.expect(firstItem).to.have.property('produto');",
                  "        pm.expect(firstItem).to.have.property('data');",
                  "        pm.expect(firstItem).to.have.property('quantidadeSimulacoes');",
                  "        pm.expect(firstItem).to.have.property('mediaValorFinal'); // SPEC field name",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/simulacoes/por-produto-dia",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simulacoes",
                "por-produto-dia"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "03 - Risk Profile",
      "item": [
        {
          "name": "Get Risk Profile - Conservative Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has profile information\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('clienteId');",
                  "    pm.expect(json).to.have.property('perfil');",
                  "    pm.expect(json).to.have.property('pontuacao');",
                  "});",
                  "",
                  "pm.test(\"Profile is valid\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.perfil).to.be.oneOf(['Conservador', 'Moderado', 'Agressivo']);",
                  "});",
                  "",
                  "pm.test(\"Score is within valid range\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.pontuacao).to.be.a('number');",
                  "    pm.expect(json.pontuacao).to.be.at.least(0);",
                  "    pm.expect(json.pontuacao).to.be.at.most(100);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/{{clienteIdConservative}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "{{clienteIdConservative}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Risk Profile - Aggressive Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Profile classification exists\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('perfil');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/{{clienteIdAggressive}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "{{clienteIdAggressive}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Risk Profile - Non-existent Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 or 200 with default profile\", () => {",
                  "    const code = pm.response.code;",
                  "    pm.expect(code).to.be.oneOf([200, 404]);",
                  "    ",
                  "    if (code === 200) {",
                  "        const json = pm.response.json();",
                  "        pm.expect(json).to.have.property('perfil');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "999999"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recommended Products - Conservative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Products match conservative profile\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        json.forEach(produto => {",
                  "            pm.expect(produto).to.have.property('id');",
                  "            pm.expect(produto).to.have.property('nome');",
                  "            pm.expect(produto).to.have.property('tipo');",
                  "            pm.expect(produto).to.have.property('risco');",
                  "            pm.expect(produto.risco).to.be.oneOf(['Baixo', 'M\u00e9dio']);",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/Conservador",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "Conservador"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recommended Products - Aggressive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/Agressivo",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "Agressivo"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Investment History",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Investment history has required fields\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.length > 0) {",
                  "        const firstItem = json[0];",
                  "        pm.expect(firstItem).to.have.property('id');",
                  "        pm.expect(firstItem).to.have.property('clienteId');",
                  "        pm.expect(firstItem).to.have.property('produtoNome');",
                  "        pm.expect(firstItem).to.have.property('valor');",
                  "        pm.expect(firstItem).to.have.property('dataInvestimento');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/investimentos/{{clienteIdConservative}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "{{clienteIdConservative}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "04 - Telemetry",
      "item": [
        {
          "name": "Get Telemetry Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response matches SPEC schema\", () => {",
                  "    const json = pm.response.json();",
                  "    // Per SPEC: GET /telemetria returns wrapper object",
                  "    pm.expect(json).to.have.property('servicos');",
                  "    pm.expect(json.servicos).to.be.an('array');",
                  "    pm.expect(json).to.have.property('periodo');",
                  "    pm.expect(json.periodo).to.have.property('inicio');",
                  "    pm.expect(json.periodo).to.have.property('fim');",
                  "});",
                  "",
                  "pm.test(\"Service objects have required fields\", () => {",
                  "    const json = pm.response.json();",
                  "    if (json.servicos && json.servicos.length > 0) {",
                  "        const firstService = json.servicos[0];",
                  "        pm.expect(firstService).to.have.property('nome');",
                  "        pm.expect(firstService).to.have.property('quantidadeChamadas');",
                  "        pm.expect(firstService).to.have.property('mediaTempoRespostaMs');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/telemetria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "telemetria"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "05 - Edge Cases & Performance",
      "item": [
        {
          "name": "Simulate - Boundary Value (Minimum)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Product not found with minimum value of R$1000",
                  "pm.test(\"Status code is 404 (no product matches)\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 1000,\n  \"prazoMeses\": 1,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Simulate - Large Value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Calculation handles large values correctly\", () => {",
                  "    const resultado = pm.response.json().resultadoSimulacao;",
                  "    const valorFinal = parseFloat(resultado.valorFinal);",
                  "    ",
                  "    // Input was R$ 1,000,000 - verify calculation succeeded",
                  "    pm.expect(valorFinal).to.be.greaterThan(1000000);",
                  "    pm.expect(valorFinal).to.be.a('number');",
                  "    pm.expect(isNaN(valorFinal)).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 1000000,\n  \"prazoMeses\": 24,\n  \"tipoProduto\": \"FUNDO_ACOES\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Response Time Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response time is acceptable (< 1000ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});",
                  "",
                  "pm.test(\"Response time is good (< 500ms)\", () => {",
                  "    pm.expect(pm.response.responseTime).to.be.below(500);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Validation Tests (Entity Existence)",
      "item": [
        {
          "name": "Risk Profile - Non-existent Client (Should 404)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/99999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "99999"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 for non-existent client\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json).to.have.property('status', 404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Investment History - Non-existent Client (Should 404)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/investimentos/99999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "99999"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 for non-existent client\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json).to.have.property('status', 404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Product Recommendations - Invalid Profile (Should 400)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/INVALID_PROFILE",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "INVALID_PROFILE"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for invalid profile\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json).to.have.property('status', 400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Non-existent Client (Should 404)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 99999,\n  \"valor\": 10000.0,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 for non-existent client\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('message');",
                  "    pm.expect(json).to.have.property('status', 404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Negative & Edge Case Tests",
      "item": [
        {
          "name": "Login - Empty Username",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for empty username\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Login - Missing Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for missing password\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Zero Value",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 0,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for zero value\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Negative Value",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": -1000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for negative value\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Zero Prazo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 0,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for zero prazo\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Negative Prazo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": -12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for negative prazo\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Missing Cliente ID",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for missing clienteId\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Missing Tipo Produto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for missing tipoProduto\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Empty JSON Body",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for empty body\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Malformed JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"clienteId\": 1, \"valor\":"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 for malformed JSON\", () => {",
                  "    pm.response.to.have.status(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Negative ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/-1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "-1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404 for negative ID\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Zero ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "0"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404 for zero ID\", () => {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Investment History - Negative ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/investimentos/-1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "investimentos",
                "-1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404 for negative ID\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Missing Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for missing token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Risk Profile - Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer INVALID_TOKEN_12345"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfil-risco/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfil-risco",
                "1"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for invalid token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Simulation - Expired Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTYwMDAwMDAwMCwiZXhwIjoxNjAwMDg2NDAwfQ.invalid"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clienteId\": 1,\n  \"valor\": 10000,\n  \"prazoMeses\": 12,\n  \"tipoProduto\": \"CDB\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/simular-investimento",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "simular-investimento"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 or 403 for expired token\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Products - Empty Profile String",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/ ",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                " "
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 404\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Products - Case Sensitivity Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/produtos-recomendados/conservador",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "produtos-recomendados",
                "conservador"
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Should accept lowercase or return 400",
                  "pm.test(\"Response is valid (200 or 400)\", () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script - runs before each request",
          "console.log('Running request: ' + pm.info.requestName);",
          "console.log('Environment: ' + pm.environment.name);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script - runs after each request",
          "pm.test(\"Response time is reasonable (< 2000ms)\", () => {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "pm.test(\"Response has correct content type\", () => {",
          "    if (pm.response.code !== 401 && pm.response.code !== 403) {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    }",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "clienteIdConservative",
      "value": "1",
      "type": "default"
    },
    {
      "key": "clienteIdModerate",
      "value": "2",
      "type": "default"
    },
    {
      "key": "clienteIdAggressive",
      "value": "3",
      "type": "default"
    }
  ]
}